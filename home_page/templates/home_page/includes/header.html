<!-- templates/header.html -->

{% load static %}
<header>
  <div class="logo">
    <img src="{% static 'home_page/images/logo.jpeg' %}" alt="Let's Learn English Logo">
  </div>

  <nav class="main-nav">
    <div class="nav-item">
      <a href="{% url 'home_page:home' %}" class="nav-link {% if request.resolver_match.url_name == 'home' %}active{% endif %}">Home</a>
    </div>  
    <div class="nav-item">
      <a href="#skills" class="nav-link">Skills</a>
    </div>
    <div class="nav-item">
      <a href="#grammar" class="nav-link">Grammar</a>
    </div>
    <div class="nav-item">
      <a href="#vocabulary" class="nav-link">Vocabulary</a>
    </div>
    
    <!-- Dynamic Test Button Based on Authentication and Pretest Status -->
    <div class="nav-item">
      {% if user.is_authenticated %}
        {% if user.profile.pretest_completed %}
          <a href="{% url 'home_page:pretest_results' %}" class="nav-link view-result-btn">View Pretest Result</a>
        {% else %}
          <a href="{% url 'home_page:start_pretest' %}" class="nav-link take-test-btn">Take Pretest</a>
        {% endif %}
      {% else %}
        <a href="{% url 'home_page:login' %}?next={% url 'home_page:start_pretest' %}" class="nav-link take-test-btn">Take Test</a>
      {% endif %}
    </div>
  </nav>

  <!-- Dynamic Authentication Links -->
  <div class="top-links">
    {% if user.is_authenticated %}
      <span class="welcome-text">Welcome, {{ user.username }}</span>
      <a href="{% url 'home_page:profile' %}" class="profile-btn">Profile</a>
      <a href="{% url 'home_page:logout' %}" class="logout-btn">Logout</a>
    {% else %}
      <a href="{% url 'home_page:login' %}" class="login-btn">Login</a>
      <a href="{% url 'home_page:register' %}" class="register-btn">Register</a>
    {% endif %}
  </div>
</header>